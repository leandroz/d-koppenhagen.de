<!doctype html><html lang="de"><head><meta name="generator" content="Scully 1.0.0-beta.0"><base href="/"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style>svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.3333333333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);transform:scale(1,-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor);opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}</style><link rel="icon" type="image/x-icon" href="assets/images/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="apple-touch-icon" href="assets/icons/icon-512x512.png"><link href="assets/icons/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="assets/icons/iphone6_splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="assets/icons/iphoneplus_splash.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image"><link href="assets/icons/iphonex_splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image"><link href="assets/icons/iphonexr_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="assets/icons/iphonexsmax_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image"><link href="assets/icons/ipad_splash.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="assets/icons/ipadpro1_splash.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="assets/icons/ipadpro3_splash.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="assets/icons/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><title>D-Koppenhagen.de | Mach aus deiner Angular-App eine PWA</title><meta name="robots" content="index, follow"><meta name="author" content="Danny Koppenhagen"><meta property="profile:first_name" content="Danny"><meta property="profile:last_name" content="Koppenhagen"><link rel="manifest" href="manifest.webmanifest"><meta name="theme-color" content="#e7e7e7"><link rel="stylesheet" href="styles.a277d08f277c156bb373.css"><style></style><style>.menu-dark[_ngcontent-oam-c21]>button[_ngcontent-oam-c21]{color:#fdfdfd;background-color:#2e3141;opacity:.9;margin:0 1px}.menu-dark[_ngcontent-oam-c21]>button[_ngcontent-oam-c21]:focus,.menu-dark[_ngcontent-oam-c21]>button[_ngcontent-oam-c21]:hover{background-color:#43485f;box-shadow:inset 0 0 0 2px #5e7959}.menu-dark[_ngcontent-oam-c21]:focus>button[_ngcontent-oam-c21]{box-shadow:inset 0 0 0 2px #ada789}@media screen and (max-width:480px){.hidden-small[_ngcontent-oam-c21]{visibility:hidden}}</style><style>.header-title[_ngcontent-oam-c22]{background-image:url(/assets/images/bg-triangles.jpg);background-size:cover;font-size:3.2em;font-family:Montserrat,sans-serif;line-height:1.1;font-weight:700;margin-bottom:.2em;-webkit-background-clip:text;background-clip:text;color:rgba(0,0,0,.29)}p.sub-header[_ngcontent-oam-c22]{color:#2e3141;font-size:1.2em}#banner[_ngcontent-oam-c22]{background-image:url(/assets/images/dk-header.jpg);background-repeat:no-repeat;background-position:100%;background-size:contain;background-color:#fdfdfd;padding:9em 0 12em;cursor:pointer;-webkit-animation:headerFadeIn 3s;animation:headerFadeIn 3s}@-webkit-keyframes headerFadeIn{0%{opacity:0}to{opacity:1}}@keyframes headerFadeIn{0%{opacity:0}to{opacity:1}}#logo[_ngcontent-oam-c22]{position:absolute;top:0;width:70px;-webkit-animation:move-to-top 1s ease,rotate 4s ease 1;animation:move-to-top 1s ease,rotate 4s ease 1;cursor:pointer}@-webkit-keyframes rotate{to{transform:rotatey(1turn)}}@keyframes rotate{to{transform:rotatey(1turn)}}@-webkit-keyframes move-to-top{0%{top:100px}to{top:0}}@keyframes move-to-top{0%{top:100px}to{top:0}}@media screen and (max-width:1150px){#banner[_ngcontent-oam-c22]{background-position:right -200px top}}@media screen and (max-width:980px){#banner[_ngcontent-oam-c22]{background-size:contain;padding:6em 0 10em;background-position:right -200px top}}@media screen and (max-width:800px){.header-title[_ngcontent-oam-c22]{font-size:2.6em}}@media screen and (max-width:736px){p.sub-header[_ngcontent-oam-c22]{font-size:1em!important;padding-right:110px}#banner[_ngcontent-oam-c22]{padding:6em 0 5em}}@media screen and (max-width:620px){.header-title[_ngcontent-oam-c22]{font-size:2.3em;padding-right:40vw}#banner[_ngcontent-oam-c22]{background-size:cover;background-position:right -180px top}}@media screen and (max-width:560px){.header-title[_ngcontent-oam-c22]{font-size:1.7em;padding-right:50vw}}@media screen and (max-width:400px){.header-title[_ngcontent-oam-c22]{background-image:unset;background-color:#2e3141;opacity:.8;font-size:1.7em;padding-right:50vw}}</style><style>@media screen and (min-width:736px){ul.contact[_ngcontent-oam-c23]{-moz-columns:2;column-count:2;width:100%!important}}</style><style>#cookie-banner[_ngcontent-oam-c24]{opacity:.9;z-index:10000;position:fixed;bottom:0;width:100%;display:flex;justify-content:space-between;align-items:baseline;background-color:#5e7959}#cookie-banner[_ngcontent-oam-c24] .banner-text[_ngcontent-oam-c24],#cookie-banner[_ngcontent-oam-c24] button[_ngcontent-oam-c24]{margin:15px}@media screen and (max-width:480px){button.small[_ngcontent-oam-c24]{padding:0 8px!important}}</style><script charset="utf-8" src="common-es2015.256f792690aaabe79723.js"></script><script charset="utf-8" src="6-es2015.e22c4eae96e5ffcb9b86.js"></script><style>.wrapper[_ngcontent-oam-c32]{margin-top:0}h1[_ngcontent-oam-c32]{font-size:1.4em}h2.sub-heading[_ngcontent-oam-c32]{font-size:.9em}.extra-info[_ngcontent-oam-c32]{display:flex;flex-direction:row;justify-content:space-between}.edit-on-github[_ngcontent-oam-c32],.external-links[_ngcontent-oam-c32],.published-at[_ngcontent-oam-c32]{margin:30px 0}.published-at[_ngcontent-oam-c32]{height:50px;display:flex;align-items:center;line-height:1.2em}.published-at[_ngcontent-oam-c32] .published-at-link[_ngcontent-oam-c32]{text-decoration:none;border:none;min-width:120px}.published-at[_ngcontent-oam-c32] .published-at-link[_ngcontent-oam-c32] .published-at-logo[_ngcontent-oam-c32]{padding-right:20px}@media screen and (max-width:560px){.blog-footer[_ngcontent-oam-c32]{position:fixed;bottom:0;left:0;width:100%;background:#2e3141;opacity:.9;z-index:1;padding:0 35px}.blog-footer[_ngcontent-oam-c32]>h3[_ngcontent-oam-c32]{display:none}.blog-footer[_ngcontent-oam-c32]>ul[_ngcontent-oam-c32]{margin:10px 0;display:flex;justify-content:space-between}.blog-footer[_ngcontent-oam-c32]>ul[_ngcontent-oam-c32]>li[_ngcontent-oam-c32]{padding-left:0}}@media screen and (max-width:360px){.blog-footer[_ngcontent-oam-c32]{padding:0 24px}}[_ngcontent-oam-c32]::slotted(h1){color:#330625;background-color:#f8d3ec;padding:5px;border-radius:5px;font-size:1.4em;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}</style><meta name="description" content="Immer häufiger stößt man im Webumfeld auf den Begriff der Progessive Web App – kurz: PWA. Doch was genau steckt dahinter und welche Vorteile hat eine PWA gegenüber einer herkömmlichen Webanwendung oder einer App? Als Progressive Web App bezeichnen wir eine Webanwendung, die beim Aufruf einer Website als App auf einem lokalen Gerät installiert werden kann – zum Beispiel auf dem Telefon oder Tablet. Die PWA lässt sich wie jede andere App nutzen, inklusive Push-Benachrichtigungen!"><link rel="canonical" href="https://angular-buch.com/blog/2019-07-progressive-web-app"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@d_koppenhagen"><meta name="twitter:creator" content="@d_koppenhagen"><meta name="twitter:title" content="Mach aus deiner Angular-App eine PWA"><meta name="twitter:description" content="Immer häufiger stößt man im Webumfeld auf den Begriff der Progessive Web App – kurz: PWA. Doch was genau steckt dahinter und welche Vorteile hat eine PWA gegenüber einer herkömmlichen Webanwendung oder einer App? Als Progressive Web App bezeichnen wir eine Webanwendung, die beim Aufruf einer Website als App auf einem lokalen Gerät installiert werden kann – zum Beispiel auf dem Telefon oder Tablet. Die PWA lässt sich wie jede andere App nutzen, inklusive Push-Benachrichtigungen!"><meta name="twitter:image" content="https://d-koppenhagen.de/assets/images/blog/pwaheader.jpg"><meta property="og:title" content="Mach aus deiner Angular-App eine PWA"><meta property="og:description" content="Immer häufiger stößt man im Webumfeld auf den Begriff der Progessive Web App – kurz: PWA. Doch was genau steckt dahinter und welche Vorteile hat eine PWA gegenüber einer herkömmlichen Webanwendung oder einer App? Als Progressive Web App bezeichnen wir eine Webanwendung, die beim Aufruf einer Website als App auf einem lokalen Gerät installiert werden kann – zum Beispiel auf dem Telefon oder Tablet. Die PWA lässt sich wie jede andere App nutzen, inklusive Push-Benachrichtigungen!"><meta name="og:image" content="https://d-koppenhagen.de/assets/images/blog/pwaheader.jpg"><meta name="og:url" content="https://d-koppenhagen.de/blog/2019-07-progressive-web-app"><style>:host{display:none}scully-content{display:none}</style><style>[_nghost-oam-c30]{display:inherit;--sb-margin:0.3125em}</style><style>[_nghost-oam-c29]{--sb-margin:0.3125em}</style><script>window.ScullyIO="generated"</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-154898970-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-154898970-1")</script></head><body id="page-wrapper" scully-version="1.0.0-beta.0"><dk-root _nghost-oam-c25="" class="ng-tns-c25-0" ng-version="10.0.2"><dk-navbar _ngcontent-oam-c25="" class="ng-tns-c25-0" _nghost-oam-c21=""><nav _ngcontent-oam-c21="" id="navigation" role="navigation" tabindex="0" class="menu-dark ng-star-inserted"><button _ngcontent-oam-c21="" role="button" aria-expanded="false" class="burger-menu" aria-label="Open menu"><span _ngcontent-oam-c21="" class="hidden-small">Menu</span></button><button _ngcontent-oam-c21="" aria-label="Switch Language">EN</button></nav></dk-navbar><dk-header _ngcontent-oam-c25="" class="ng-tns-c25-0" _nghost-oam-c22=""><header _ngcontent-oam-c22="" id="banner" routerlink="/" tabindex="0" class="ng-star-inserted"><div _ngcontent-oam-c22="" class="inner"><img _ngcontent-oam-c22="" routerlink="/" src="assets/images/logo_header.png" id="logo" tabindex="0" alt="Logo"><h1 _ngcontent-oam-c22="" class="header-title">Hello,<br _ngcontent-oam-c22="">I am Danny<br _ngcontent-oam-c22="">Koppenhagen</h1><p _ngcontent-oam-c22="" class="sub-header">Developer, IT Consultant, Author</p></div></header></dk-header><router-outlet _ngcontent-oam-c25="" class="ng-tns-c25-0"></router-outlet><dk-blog-content _nghost-oam-c32="" class="ng-star-inserted"><article _ngcontent-oam-c32="" class="wrapper alt ng-star-inserted"><div _ngcontent-oam-c32="" class="inner ng-star-inserted"><section _ngcontent-oam-c32="" class="blog-header"><span _ngcontent-oam-c32="" class="image fit ng-star-inserted"><img _ngcontent-oam-c32="" src="assets/images/blog/pwaheader.jpg" alt="Blog-Post title image"></span></section><section _ngcontent-oam-c32="" class="extra-section ng-star-inserted"><div _ngcontent-oam-c32="" class="extra-info"><h2 _ngcontent-oam-c32="" class="sub-heading">Keywords</h2><h2 _ngcontent-oam-c32="" class="sub-heading ng-star-inserted">Last update: 24.07.2019</h2></div><div _ngcontent-oam-c32="" class="actions"><span _ngcontent-oam-c32="" class="ng-star-inserted"><button _ngcontent-oam-c32="" routerlink="/blog" class="button xs" tabindex="0" aria-label="Filter for keyword: PWA">PWA</button> </span><span _ngcontent-oam-c32="" class="ng-star-inserted"><button _ngcontent-oam-c32="" routerlink="/blog" class="button xs" tabindex="0" aria-label="Filter for keyword: Progressive Web App">Progressive Web App</button> </span><span _ngcontent-oam-c32="" class="ng-star-inserted"><button _ngcontent-oam-c32="" routerlink="/blog" class="button xs" tabindex="0" aria-label="Filter for keyword: Angular">Angular</button> </span><span _ngcontent-oam-c32="" class="ng-star-inserted"><button _ngcontent-oam-c32="" routerlink="/blog" class="button xs" tabindex="0" aria-label="Filter for keyword: Service Worker">Service Worker</button> </span><span _ngcontent-oam-c32="" class="ng-star-inserted"><button _ngcontent-oam-c32="" routerlink="/blog" class="button xs" tabindex="0" aria-label="Filter for keyword: Web App Manifest">Web App Manifest</button> </span><span _ngcontent-oam-c32="" class="ng-star-inserted"><button _ngcontent-oam-c32="" routerlink="/blog" class="button xs" tabindex="0" aria-label="Filter for keyword: Caching">Caching</button> </span><span _ngcontent-oam-c32="" class="ng-star-inserted"><button _ngcontent-oam-c32="" routerlink="/blog" class="button xs" tabindex="0" aria-label="Filter for keyword: Push Notification">Push Notification</button></span></div><div _ngcontent-oam-c32="" class="published-at ng-star-inserted"><div _ngcontent-oam-c32=""><a _ngcontent-oam-c32="" class="published-at-link" href="https://angular-buch.com/blog/2019-07-progressive-web-app"><img _ngcontent-oam-c32="" class="published-at-logo ng-star-inserted" src="https://angular-buch.com/assets/img/brand.svg" alt="Logo of the original publisher"></a></div><div _ngcontent-oam-c32="">This blog post has been published originally at: <a _ngcontent-oam-c32="" href="https://angular-buch.com/blog/2019-07-progressive-web-app">angular-buch.com</a>.</div></div></section><section _ngcontent-oam-c32="" class="external-links"></section><section _ngcontent-oam-c32="" class="blog-content"><!--scullyContent-begin--><h1 id="mach-aus-deiner-angular-app-eine-pwa" _ngcontent-oam-c32="">Mach aus deiner Angular-App eine PWA</h1><p _ngcontent-oam-c32="">Immer häufiger stößt man im Webumfeld auf den Begriff der Progessive Web App – kurz: PWA. Doch was genau steckt dahinter und welche Vorteile hat eine PWA gegenüber einer herkömmlichen Webanwendung oder einer App? Als <em _ngcontent-oam-c32="">Progressive Web App</em> bezeichnen wir eine Webanwendung, die beim Aufruf einer Website als App auf einem lokalen Gerät installiert werden kann – zum Beispiel auf dem Telefon oder Tablet. Die PWA lässt sich wie jede andere App nutzen, inklusive Push-Benachrichtigungen!</p><hr _ngcontent-oam-c32=""><div id="toc" _ngcontent-oam-c32=""><h2 _ngcontent-oam-c32="">Inhalt</h2><ul><li><a href="/blog/2019-07-progressive-web-app#webanwendung-vs-pwa-vs-app">Webanwendung vs. PWA vs. App</a></li><ul style="margin-bottom:0"><li><a href="/blog/2019-07-progressive-web-app#service-worker">Service Worker</a></li><li><a href="/blog/2019-07-progressive-web-app#eine-bestehende-angular-anwendung-in-eine-pwa-verwandeln">Eine bestehende Angular-Anwendung in eine PWA verwandeln</a></li></ul><li><a href="/blog/2019-07-progressive-web-app#add-to-homescreen">Add to Homescreen</a></li><ul style="margin-bottom:0"><li><a href="/blog/2019-07-progressive-web-app#das-web-app-manifest-anpassen-manifestjson">Das Web App Manifest anpassen (manifest.json)</a></li><li><a href="/blog/2019-07-progressive-web-app#anpassungen-für-ios-indexhtml">Anpassungen für iOS (index.html)</a></li></ul><li><a href="/blog/2019-07-progressive-web-app#offline-funktionalität">Offline-Funktionalität</a></li><ul style="margin-bottom:0"><li><a href="/blog/2019-07-progressive-web-app#konfiguration-für-angular-service-worker-anpassen-ngsw-configjson">Konfiguration für Angular Service Worker anpassen (ngsw-config.json)</a></li><li><a href="/blog/2019-07-progressive-web-app#die-pwa-updaten">Die PWA updaten</a></li></ul><li><a href="/blog/2019-07-progressive-web-app#push-notifications">Push Notifications</a></li><ul style="margin-bottom:0"><li><a href="/blog/2019-07-progressive-web-app#auf-die-push-notification-reagieren">Auf die Push Notification reagieren</a></li><li><a href="/blog/2019-07-progressive-web-app#ein-blick-unter-die-haube-von-push-notifications">Ein Blick unter die Haube von Push Notifications</a></li></ul><li><a href="/blog/2019-07-progressive-web-app#zusammenfassung">Zusammenfassung</a></li></ul></div><h2 id="webanwendung-vs-pwa-vs-app" _ngcontent-oam-c32="">Webanwendung vs. PWA vs. App</h2><p _ngcontent-oam-c32="">Wir wollen zunächst den Begriff der PWA etwas konkreter einordnen. Dazu schauen wir uns den Unterschied einer PWA im Vergleich zu einer herkömmlichen Webanwendung und einer App an. Mithilfe einer Webanwendung kann ein Nutzer über eine URL im Browser Informationen abrufen und verarbeiten. Eine App erfüllt einen ähnlichen Zweck, wird allerdings auf einem Gerät lokal installiert und benötigt in der Regel keinen Browser zur Informationsverarbeitung. Weiterhin kann eine App prinzipiell auch offline genutzt werden, und sie hat oft Zugriff auf native Funktionen des Geräts: Push Notifications und Zugriff auf das Dateisystem sowie Kamera und Sensorik. Eine PWA stellt nun eine Art Mix von beidem dar: Es handelt sich grundlegend auch um eine Webanwendung, sie wird allerdings durch den Nutzer heruntergeladen und auf dem lokalen Gerät gespeichert. Weiterhin sorgt eine PWA dafür, dass die wichtigsten Daten im Client gecacht werden. Somit bleiben Informationen, die die Anwendung liefert, stets abrufbar – auch wenn ggf. keine durchgängige Internetverbindung vorhanden ist. Außerdem kann eine PWA auch Push Notifications erhalten und anzeigen.</p><p _ngcontent-oam-c32="">Die drei wichtigsten Charakteristiken einer PWA sind also folgende:</p><ul _ngcontent-oam-c32=""><li _ngcontent-oam-c32="">"Add to Homescreen"-Funktionalität</li><li _ngcontent-oam-c32="">Offline-Fähigkeit</li><li _ngcontent-oam-c32="">Push Notifications</li></ul><h3 id="service-worker" _ngcontent-oam-c32="">Service Worker</h3><p _ngcontent-oam-c32="">Als Grundvoraussetzung, um eine PWA offlinefähig zu machen und Push-Benachrichtigungen zu versenden, werden die sogenannten <em _ngcontent-oam-c32="">Service Worker</em> benötigt. Service Worker sind gewissermaßen kleine Helfer des Browsers, die bestimmte Aufgaben im Hintergrund übernehmen. Hierzu zählen das Speichern und Abrufen der Daten auf einem Endgerät. Service Worker prüfen beispielsweise, ob eine Netzwerkverbindung besteht, und senden – je nach Konfiguration – Daten aus dem Cache an die Anwendung, oder versuchen, die Daten online abzurufen. Eine weitere Aufgabe ist das Empfangen von Push-Benachrichtigungen vom Server.</p><h3 id="eine-bestehende-angular-anwendung-in-eine-pwa-verwandeln" _ngcontent-oam-c32="">Eine bestehende Angular-Anwendung in eine PWA verwandeln</h3><p _ngcontent-oam-c32="">Schauen wir uns das Ganze an einem Beispiel an. Wie wollen das <a href="https://book-monkey3.angular-buch.com" _ngcontent-oam-c32="">Beispielprojekt BookMonkey</a> aus dem Angular-Buch in eine PWA verwandeln. Somit können Nutzer die App auf ihrem Gerät installieren und erhalten stets Buchdaten, auch wenn gerade keine Netzwerkkonnektivität vorhanden ist. Zunächst klonen wir uns hierfür die bestehende Webanwendung in ein lokales Repository:</p><pre _ngcontent-oam-c32=""><code class="language-bash" _ngcontent-oam-c32="">git <span class="hljs-built_in" _ngcontent-oam-c32="">clone</span> git@github.com:book-monkey3/iteration-7-i18n.git BookMonkey-PWA
<span class="hljs-built_in" _ngcontent-oam-c32="">cd</span> BookMonkey-PWA</code></pre><p _ngcontent-oam-c32="">Als Nächstes fügen wir das Paket <code _ngcontent-oam-c32="">@angular/pwa</code> mithilfe von <code _ngcontent-oam-c32="">ng add</code> zum Projekt hinzu. Die dahinterliegenden Schematics nehmen uns bereits einen Großteil der Arbeit zum Erzeugen der PWA ab:</p><ul _ngcontent-oam-c32=""><li _ngcontent-oam-c32="">Hinzufügen des Pakets <code _ngcontent-oam-c32="">@angular/service-worker</code> zu unserem Projekt</li><li _ngcontent-oam-c32="">Aktivieren des Build Support für Service Worker in der Angular CLI</li><li _ngcontent-oam-c32="">Importieren und Registrieren des <code _ngcontent-oam-c32="">ServiceWorkerModule</code> im <code _ngcontent-oam-c32="">AppModule</code></li><li _ngcontent-oam-c32="">Update der Datei <code _ngcontent-oam-c32="">index.html</code> mit einem Link zum Web App Manifest (<code _ngcontent-oam-c32="">manifest.json</code>) sowie Hinzufügen relevanter Meta-Tags</li><li _ngcontent-oam-c32="">Erzeugen und Verlinken von Icon-Dateien</li><li _ngcontent-oam-c32="">Erzeugen der Konfigurationsdatei <code _ngcontent-oam-c32="">ngsw-config.json</code> für den Service Worker</li></ul><pre _ngcontent-oam-c32=""><code class="language-bash" _ngcontent-oam-c32="">ng add @angular/pwa --project BookMonkey</code></pre><p _ngcontent-oam-c32="">Soweit so gut – das wichtigste ist bereits erledigt. Wir können jetzt schon unsere Anwendung in Form einer PWA erzeugen und nutzen. Wichtig ist, dass die Anwendung immer im Produktivmodus gebaut wird, denn der Service Worker ist im Entwicklungsmodus nicht aktiv.</p><pre _ngcontent-oam-c32=""><code class="language-bash" _ngcontent-oam-c32="">ng build --prod</code></pre><p _ngcontent-oam-c32="">Nach dem Build der Anwendung wollen wir uns das Ergebnis im Browser ansehen. Dafür können wir das Paket <code _ngcontent-oam-c32="">angular-http-server</code> nutzen, das einen einfachen Webserver bereitstellt.</p><blockquote _ngcontent-oam-c32=""><p _ngcontent-oam-c32="">Der <code _ngcontent-oam-c32="">angular-http-server</code> leitet im Gegensatz zum <code _ngcontent-oam-c32="">http-server</code> alle Anfragen zu nicht existierenden Verzeichnissen oder Dateien an die Datei <code _ngcontent-oam-c32="">index.html</code> weiter. Dies ist notwendig, da das Routing durch Angular und nicht durch den Webserver durchgeführt wird.</p></blockquote><pre _ngcontent-oam-c32=""><code class="language-bash" _ngcontent-oam-c32="">npm i angular-http-server --save-dev
npx angular-http-server --path=dist/BookMonkey</code></pre><p _ngcontent-oam-c32="">Um nun zu testen, ob wir tatsächlich eine PWA erhalten haben, rufen wir am besten die Google Chrome Developer Tools auf. Dort können wir im Tab <em _ngcontent-oam-c32="">Network</em> die Checkbox <em _ngcontent-oam-c32="">Offline</em> setzen. Anschließend laden wir die Seite neu. Wir sehen, dass trotz des Offline-Modus die Startseite unserer App angezeigt wird, da der Service Worker ein Caching erwirkt hat. Navigieren wir allerdings zur Buchliste, so können keine Bücher angezeigt werden.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/bm-pwa-offline.png" alt="Screenshot BookMonkey PWA, Offline-Modus in den Google Chrome Developer Tools aktivieren" _ngcontent-oam-c32=""></p><blockquote _ngcontent-oam-c32=""><p _ngcontent-oam-c32="">Achtung: Die PWA verwendet Service Worker. Diese können ausschließlich über gesicherte Verbindungen mit HTTPS oder über eine <code _ngcontent-oam-c32="">localhost</code>-Verbindung genutzt werden. Rufen Sie die App, die mittels <code _ngcontent-oam-c32="">angular-http-server</code> ohne SSL ausgeliefert wird, also über ein anderes Gerät auf, so werden die Service Worker nicht wie gewünscht funktionieren.</p></blockquote><h2 id="add-to-homescreen" _ngcontent-oam-c32="">Add to Homescreen</h2><p _ngcontent-oam-c32="">Prinzipiell kann jede Website unter Android oder iOS zum Homescreen hinzugefügt werden. Sie erhält dann ein eigenes App-Icon erhält und sieht zunächst schon wie eine native App aus. Unter iOS wird hierfür der Safari-Browser benötigt. Im Safari kann über den Button <em _ngcontent-oam-c32="">Teilen</em> (kleines Rechteck mit einem Pfeil nach oben) ein Menü geöffnet werden, in dem die Auswahl "Zum Home-Bildschirm" zu finden ist. Nach Bestätigung des Dialogfelds wird eine Verknüfung auf dem Homescreen angelegt. Aber: Haben wir hier noch keine speziellen Icons hinterlegt, wird ggf. nur eine Miniatur der Website als Icon angezeigt.</p><h3 id="das-web-app-manifest-anpassen-manifestjson" _ngcontent-oam-c32="">Das Web App Manifest anpassen (<code _ngcontent-oam-c32="">manifest.json</code>)</h3><p _ngcontent-oam-c32="">Das Web App Manifest ist eine JSON-Datei, die dem Browser mitteilt, wie sich die Anwendung verhalten soll, wenn Sie installiert wird. Hier wird beispielsweise eine Hintergrundfarbe für die Menüleiste auf den nativen Endgeräten hinterlegt, und es werden die Pfade zu hinterlegten Icons angegeben.</p><p _ngcontent-oam-c32="">Wir wollen die Standard-Datei, die von den PWA Schematics generiert wurde, noch etwas anpassen. Um dies nicht händisch zu tun, verwenden wir am besten einen Generator wie den <a href="https://app-manifest.firebaseapp.com/" _ngcontent-oam-c32="">Web App Manifest Generator</a>. Hierbei sollten wir bei der Einstellung <em _ngcontent-oam-c32="">Display Mode</em> die Auswahl <em _ngcontent-oam-c32="">Standalone</em> nutzen, da wir eine eigenständige App erhalten wollen, die nicht als Browser erkennbar ist. Wollen wir das Standard-Icon ändern, laden wir hier einfach ein Bild hoch und lassen die zugehörigen Bilder erzeugen. Nach dem Entpacken der ZIP-Datei speichern wir die Icons in unserem Projekt unter <code _ngcontent-oam-c32="">src/assets/icons</code> ab. Anschließend sollten wir noch einmal die Pfade in der Datei <code _ngcontent-oam-c32="">manifest.json</code> prüfen.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/web-app-manifest-generator.png" alt="Screenshot Web App Manifest Generator" _ngcontent-oam-c32=""></p><h3 id="anpassungen-für-ios-indexhtml" _ngcontent-oam-c32="">Anpassungen für iOS (<code _ngcontent-oam-c32="">index.html</code>)</h3><p _ngcontent-oam-c32="">Wollen wir unsere PWA unter iOS installieren, sind noch einige Anpassungen an der Datei <code _ngcontent-oam-c32="">index.html</code> notwendig. iOS-Geräte benötigen spezielle <code _ngcontent-oam-c32="">meta</code>- und <code _ngcontent-oam-c32="">link</code>-Tags zur Identifizierung der zugehörigen Icons, denn sie extrahieren diese Informationen nicht aus dem Web-Manifest.</p><p _ngcontent-oam-c32="">Um das Icon für den Homescreen zu definieren, müssen die folgenden Zeilen in die Datei <code _ngcontent-oam-c32="">index.html</code> eingefügt werden:</p><pre _ngcontent-oam-c32=""><code class="language-html" _ngcontent-oam-c32=""><span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">head</span>&gt;</span>
  ...
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-icon"</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/icons/icon-512x512.png"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-icon"</span> <span class="hljs-attr" _ngcontent-oam-c32="">sizes</span>=<span class="hljs-string" _ngcontent-oam-c32="">"152x152"</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/icons/icon-152x152.png"</span>&gt;</span>
<span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">head</span>&gt;</span></code></pre><p _ngcontent-oam-c32="">Wir geben den entsprechenden Pfad zum genutzten Icon an. Über das Attribut <code _ngcontent-oam-c32="">sizes</code> können wir Icons mit bestimmten Größen hinterlegen. Weitere gängige Größen für iOS sind z. B. <code _ngcontent-oam-c32="">180x180</code> und <code _ngcontent-oam-c32="">167x167</code>.</p><p _ngcontent-oam-c32="">Weiterhin können wir über die <code _ngcontent-oam-c32="">link</code>-Tags für iOS ein Splashscreen-Bild hinterlegen. Dieses wird angezeigt, sobald wir die App vom Homescreen aus starten. Auch hierfür existiert ein Generator, der uns die Bilder in den entsprechenden Größen erzeugt und und die generierten <code _ngcontent-oam-c32="">link</code>-Tags anzeigt: <a href="https://appsco.pe/developer/splash-screens/" _ngcontent-oam-c32="">iOS Splash Screen Generator</a>.</p><p _ngcontent-oam-c32="">Anschließend fügen wir die Tags ebenfalls in die <code _ngcontent-oam-c32="">index.html</code> ein. Wir müssen an dieser Stelle noch den Pfad zu den Bildern so anpassen, dass er korrekt auf die tatsächlichen Dateien zeigt. Die erste Zeile teilt iOS-Geräten mit, dass die Webanwendung als App genutzt werden kann. Nur wenn diese Zeile in der <code _ngcontent-oam-c32="">index.html</code> angegeben wurde, liest das iOS-Gerät den <code _ngcontent-oam-c32="">link</code>-Tag mit der Angabe zum Splashscreen aus.</p><pre _ngcontent-oam-c32=""><code class="language-html" _ngcontent-oam-c32=""><span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">head</span>&gt;</span>
  <span class="hljs-comment" _ngcontent-oam-c32="">&lt;!-- ... --&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">meta</span> <span class="hljs-attr" _ngcontent-oam-c32="">name</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-mobile-web-app-capable"</span> <span class="hljs-attr" _ngcontent-oam-c32="">content</span>=<span class="hljs-string" _ngcontent-oam-c32="">"yes"</span>&gt;</span>
  <span class="hljs-comment" _ngcontent-oam-c32="">&lt;!-- ... --&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/iphone5_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/iphone6_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/iphoneplus_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/iphonex_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/iphonexr_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/iphonexsmax_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/ipad_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/ipadpro1_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/ipadpro3_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">link</span> <span class="hljs-attr" _ngcontent-oam-c32="">href</span>=<span class="hljs-string" _ngcontent-oam-c32="">"assets/splashscreens/ipadpro2_splash.png"</span> <span class="hljs-attr" _ngcontent-oam-c32="">media</span>=<span class="hljs-string" _ngcontent-oam-c32="">"(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)"</span> <span class="hljs-attr" _ngcontent-oam-c32="">rel</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-touch-startup-image"</span>&gt;</span>
<span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">head</span>&gt;</span></code></pre><p _ngcontent-oam-c32="">Als Letztes haben wir noch die Möglichkeit, die Statusbar der App hinsichtlich ihrer Farbe anzupassen. Dazu führen wir das folgende Metatag zur <code _ngcontent-oam-c32="">index.html</code> hinzu.</p><pre _ngcontent-oam-c32=""><code class="language-html" _ngcontent-oam-c32=""><span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">head</span>&gt;</span>
  <span class="hljs-comment" _ngcontent-oam-c32="">&lt;!-- ... --&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">meta</span> <span class="hljs-attr" _ngcontent-oam-c32="">name</span>=<span class="hljs-string" _ngcontent-oam-c32="">"apple-mobile-web-app-status-bar-style"</span> <span class="hljs-attr" _ngcontent-oam-c32="">content</span>=<span class="hljs-string" _ngcontent-oam-c32="">"black"</span>&gt;</span>
  <span class="hljs-comment" _ngcontent-oam-c32="">&lt;!-- ... --&gt;</span>
<span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">head</span>&gt;</span></code></pre><p _ngcontent-oam-c32="">Wir können als Wert für <code _ngcontent-oam-c32="">content</code> zwischen den folgenden Einstellungen wählen:</p><table _ngcontent-oam-c32=""><thead _ngcontent-oam-c32=""><tr _ngcontent-oam-c32=""><th _ngcontent-oam-c32=""></th><th _ngcontent-oam-c32="">Text- und Iconfarbe</th><th _ngcontent-oam-c32="">Hintergrundfarbe</th></tr></thead><tbody _ngcontent-oam-c32=""><tr _ngcontent-oam-c32=""><td _ngcontent-oam-c32=""><code _ngcontent-oam-c32="">default</code></td><td _ngcontent-oam-c32="">Schwarz</td><td _ngcontent-oam-c32="">Weiß</td></tr><tr _ngcontent-oam-c32=""><td _ngcontent-oam-c32=""><code _ngcontent-oam-c32="">white</code></td><td _ngcontent-oam-c32="">Schwarz</td><td _ngcontent-oam-c32="">Weiß</td></tr><tr _ngcontent-oam-c32=""><td _ngcontent-oam-c32=""><code _ngcontent-oam-c32="">black</code></td><td _ngcontent-oam-c32="">Weiß</td><td _ngcontent-oam-c32="">Schwarz</td></tr><tr _ngcontent-oam-c32=""><td _ngcontent-oam-c32=""><code _ngcontent-oam-c32="">black-translucent</code></td><td _ngcontent-oam-c32="">Weiß</td><td _ngcontent-oam-c32="">Hintergrundfarbe der App (<code _ngcontent-oam-c32="">body</code>-Element)</td></tr></tbody></table><p _ngcontent-oam-c32="">Wir schauen uns das Ergebnis nun im Safari-Browser unter iOS an. Nach dem Öffnen der Seite können wir diese über die Funktion "Add to Homescreen" auf dem Apple-Gerät speichern. Wir sehen, dass die App die korrekten Icons nutzt und uns nach der Installation und dem Start zunächst kurz den Splashscreen zeigt, bevor die App vollflächig dargestellt wird. Die Statusbar ist in unserem Fall Schwarz, wie zuvor angegeben.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/bm-pwa-ios-homescreen-splashscreen-start.png" alt="Der BookMonkey als PWA mit Splashscreen unter iOS" _ngcontent-oam-c32=""></p><h2 id="offline-funktionalität" _ngcontent-oam-c32="">Offline-Funktionalität</h2><p _ngcontent-oam-c32="">Die Anwendung verhält sich nun wie eine normale Webanwendung. Um mehr das Gefühl einer nativen App zu erzeugen, betrachten wir als Nächstes die Offline-Fähigkeit der App.</p><h3 id="konfiguration-für-angular-service-worker-anpassen-ngsw-configjson" _ngcontent-oam-c32="">Konfiguration für Angular Service Worker anpassen (<code _ngcontent-oam-c32="">ngsw-config.json</code>)</h3><p _ngcontent-oam-c32="">Der Angular Service Worker besitzt die Konfigurationsdatei <code _ngcontent-oam-c32="">ngsw-config.json</code> . Hier wird definiert, welche Ressourcen und Pfade gecacht werden sollen und welche Strategie hierfür verwendet wird. Eine ausführliche Beschreibung der einzelnen Parameter finden Sie in der offiziellen Dokumentation auf <a href="https://angular.io/guide/service-worker-config" _ngcontent-oam-c32="">angular.io</a>.</p><p _ngcontent-oam-c32="">Die beiden großen Blöcke der Konfiguration sind die <code _ngcontent-oam-c32="">assetGroups</code> und die <code _ngcontent-oam-c32="">dataGroup</code>. Im Array <code _ngcontent-oam-c32="">assetGroups</code> ist die Konfiguration zu Ressourcen enthalten, die zur App selbst gehören. Hierzu zählen zum Beispiel statische Bilder, CSS-Stylesheets, Third-Party-Ressourcen, die von CDNs geladen werden etc. Das Array <code _ngcontent-oam-c32="">dataGroup</code>, beinhaltet Ressourcen, die nicht zur App selbst gehören, zum Beispiel API-Aufrufe und andere Daten-Abhängigkeiten.</p><p _ngcontent-oam-c32="">Wir wollen bei unserer Beispielanwendung zunächst erwirken, dass die Antworten von der HTTP-API gecacht werden: die Liste der Bücher, bereits angesehene einzelne Bücher und auch die Suchresultate. Diese Ergebnisse können dann also auch angezeigt werden, wenn keine Netzwerkverbindung besteht. Dazu passen wir die Datei <code _ngcontent-oam-c32="">ngsw-config.json</code> an und erweitern diese wie folgt:</p><blockquote _ngcontent-oam-c32=""><p _ngcontent-oam-c32="">Achtung! Wenn Sie Änderungen am Quellcode durchführen, werden Ihnen ggf. beim Aktualisieren der Anwendung im Browser alte (gecachte) Daten angezeigt. Sie sollten deshalb während der Entwicklung stets einen neuen Incognito-Tab im Browser nutzen. Schließen Sie den Tab und laden die Anwendung neu, erhalten Sie eine "frische" Anwendung. Achten Sie auch darauf, dass in den Google Chrome Developer Tools die Option <em _ngcontent-oam-c32="">Disable Cache</em> deaktiviert ist.</p></blockquote><pre _ngcontent-oam-c32=""><code class="language-json" _ngcontent-oam-c32="">{
  <span class="hljs-attr" _ngcontent-oam-c32="">"$schema"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"./node_modules/@angular/service-worker/config/schema.json"</span>,
  <span class="hljs-attr" _ngcontent-oam-c32="">"index"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"/index.html"</span>,
  <span class="hljs-attr" _ngcontent-oam-c32="">"assetGroups"</span>: [ <span class="hljs-comment" _ngcontent-oam-c32="">/* ... */</span> ],
  <span class="hljs-attr" _ngcontent-oam-c32="">"dataGroups"</span>: [
    {
      <span class="hljs-attr" _ngcontent-oam-c32="">"name"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"Books"</span>,
      <span class="hljs-attr" _ngcontent-oam-c32="">"urls"</span>: [
        <span class="hljs-string" _ngcontent-oam-c32="">"/secure/books"</span>,
        <span class="hljs-string" _ngcontent-oam-c32="">"/secure/books/search/**"</span>,
        <span class="hljs-string" _ngcontent-oam-c32="">"/secure/book/**"</span>
      ],
      <span class="hljs-attr" _ngcontent-oam-c32="">"cacheConfig"</span>: {
        <span class="hljs-attr" _ngcontent-oam-c32="">"strategy"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"freshness"</span>,
        <span class="hljs-attr" _ngcontent-oam-c32="">"maxSize"</span>: <span class="hljs-number" _ngcontent-oam-c32="">50</span>,
        <span class="hljs-attr" _ngcontent-oam-c32="">"maxAge"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"1d2h"</span>,
        <span class="hljs-attr" _ngcontent-oam-c32="">"timeout"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"3s"</span>
      }
    }
  ]
}</code></pre><p _ngcontent-oam-c32="">Wir verwenden an dieser Stelle den Block <code _ngcontent-oam-c32="">dataGroups</code>, da unsere Buchdatenbank keine statischen Daten enthält, die direkt zur App gehören. Dem neuen Abschnitt in <code _ngcontent-oam-c32="">dataGroups</code> geben wir die selbst festgelegte Bezeichnung <code _ngcontent-oam-c32="">Books</code>. Wir definieren damit, dass alle Aufrufe unter <code _ngcontent-oam-c32="">/secure/books</code> vom Service Worker behandelt werden sollen. Dasselbe gilt auch für alle anderen definierten Pfade zur HTTP-API. Im letzten Schritt definieren wir das Verhalten des Caches. Wir wollen hier die Strategie <code _ngcontent-oam-c32="">freshness</code> verwenden: Sie besagt, dass idealerweise die aktuellen Daten abgerufen werden, bevor sie aus dem Cache bezogen werden. Erhalten wir jedoch ein Netzwerk-Timeout nach Ablauf der definierten Zeit im Parameter <code _ngcontent-oam-c32="">timeout</code>, werden die zuletzt gecachten Daten ausgeliefert. Die Strategie eignet sich vor allem für dynamische Daten, die über eine API bezogen werden, und die möglichst immer im aktuellen Stand repräsentiert werden sollen. Die Option <code _ngcontent-oam-c32="">maxSize</code> definiert die maximale Anzahl von Einträgen im Cache. <code _ngcontent-oam-c32="">maxAge</code> gibt die maximale Gültigkeit der Daten im Cache an, in unserem Fall sollen die Daten einen Tag und 2 Stunden gültig sein.</p><p _ngcontent-oam-c32="">Eine zweite mögliche Strategie für den Cache ist die Einstellung <code _ngcontent-oam-c32="">performance</code>. Diese liefert immer zunächst die Daten aus dem Cache, solange diese gültig sind. Erst wenn der <code _ngcontent-oam-c32="">timeout</code> abläuft, werden die Daten im Cache aktualisiert. Diese Strategie eignet sich für Daten, die nicht sehr oft geändert werden müssen oder bei denen eine hohe Aktualität keine große Relevanz hat.</p><p _ngcontent-oam-c32="">Schauen wir uns nun wieder unsere Anwendung an und deaktivieren die Netzwerkverbindung nach dem erstmaligen Abrufen der Buchliste, so sehen wir, dass weiterhin Buchdaten angezeigt werden, wenn wir die Anwendung neu laden oder in ihr navigieren.</p><h3 id="die-pwa-updaten" _ngcontent-oam-c32="">Die PWA updaten</h3><p _ngcontent-oam-c32="">Ein Service Worker wird automatisch im Browser installiert und ist dort aktiv. Stellt der Server eine neue Version zur Verfügung, so muss der Service Worker im Browser aktualisiert werden. Solche Updates werden in Angular über den Service <code _ngcontent-oam-c32="">SwUpdate</code> behandelt. Dieser liefert uns Informationen über ein verfügbares bzw. durchgeführtes Update, auf die wir reagieren können. In der Regel werden Service Worker im Hintergrund geupdatet und die Nutzer bekommen davon nichts mit. Es kann jedoch hilfreich sein, dem Nutzer mitzuteilen, dass ein Update vorliegt, um beispielsweise über Neuerungen zu informieren. Wir wollen genau diesen Fall implementieren.</p><p _ngcontent-oam-c32="">Zunächst passen wir dafür die Datei <code _ngcontent-oam-c32="">ngsw-config.json</code> an. Hier fügen wir den Abschnitt <code _ngcontent-oam-c32="">appData</code> ein. Dieser kann Informationen wie eine Beschreibung, die Version und weitere Metadaten zur Anwendung enthalten. Wir wollen in diesem Abschnitt eine Versionsnummer sowie einen Changelog hinterlegen, den wir später bei einem Update den Nutzern anzeigen wollen.</p><blockquote _ngcontent-oam-c32=""><p _ngcontent-oam-c32="">Achtung: Die Versionsnummer dient lediglich als Nutzerinformation. Hinter den Kulissen erfolgt jedoch ein Binärvergleich des erzeugten Service Workers aus der <code _ngcontent-oam-c32="">ngsw-config.json</code>. Jede kleinste Änderung an der <code _ngcontent-oam-c32="">ngsw-config.json</code> führt somit zu einem neuen Service Worker unabhängig von der von uns hinterlegten Versionsnummer.</p></blockquote><pre _ngcontent-oam-c32=""><code class="language-json" _ngcontent-oam-c32="">{
  <span class="hljs-attr" _ngcontent-oam-c32="">"$schema"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"./node_modules/@angular/service-worker/config/schema.json"</span>,
  <span class="hljs-attr" _ngcontent-oam-c32="">"index"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"/index.html"</span>,
  <span class="hljs-attr" _ngcontent-oam-c32="">"appData"</span>: {
    <span class="hljs-attr" _ngcontent-oam-c32="">"version"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"1.1.0"</span>,
    <span class="hljs-attr" _ngcontent-oam-c32="">"changelog"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"aktuelle Version"</span>
  },
  <span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
}</code></pre><p _ngcontent-oam-c32="">Anschließend bauen wir die Anwendung (<code _ngcontent-oam-c32="">ng build --prod</code>) und rufen sie im Browser auf – bis hierhin ist alles wie gehabt. Nun wollen wir, dass der Nutzer über Änderungen informiert wird. Dafür nutzen wir den Service <code _ngcontent-oam-c32="">SwUpdate</code>. Er stellt das Observable <code _ngcontent-oam-c32="">available</code> zur Verfügung, das wir abonnieren können. Sobald ein neuer Service Worker verfügbar ist, wird dieses Event ausgelöst. Wir können nun einen Confirm-Dialog anzeigen und den Nutzer fragen, ob ein Update durchgeführt werden soll. Das Event aus dem Observable liefert uns außerdem die komplette Konfiguration von <code _ngcontent-oam-c32="">appData</code> aus der <code _ngcontent-oam-c32="">ngsw-config.json</code> in der aktuellen Version sowie in der neuen Version des Service Workers. Bestätigt der Nutzer nun den Dialog mit <em _ngcontent-oam-c32="">OK</em>, erfolgt ein Neuladen der Seite, was ein Update des Service Workers zur Folge hat.</p><pre _ngcontent-oam-c32=""><code class="language-ts" _ngcontent-oam-c32=""><span class="hljs-keyword" _ngcontent-oam-c32="">import</span> { Component, OnInit } <span class="hljs-keyword" _ngcontent-oam-c32="">from</span> <span class="hljs-string" _ngcontent-oam-c32="">'@angular/core'</span>;
<span class="hljs-keyword" _ngcontent-oam-c32="">import</span> { SwUpdate } <span class="hljs-keyword" _ngcontent-oam-c32="">from</span> <span class="hljs-string" _ngcontent-oam-c32="">'@angular/service-worker'</span>;

<span class="hljs-meta" _ngcontent-oam-c32="">@Component</span>({ <span class="hljs-comment" _ngcontent-oam-c32="">/* ... */</span> })
<span class="hljs-keyword" _ngcontent-oam-c32="">export</span> <span class="hljs-keyword" _ngcontent-oam-c32="">class</span> AppComponent <span class="hljs-keyword" _ngcontent-oam-c32="">implements</span> OnInit {

  <span class="hljs-keyword" _ngcontent-oam-c32="">constructor</span>(<span class="hljs-params" _ngcontent-oam-c32=""><span class="hljs-keyword" _ngcontent-oam-c32="">private</span> swUpdate: SwUpdate</span>) {}

  ngOnInit() {
    <span class="hljs-keyword" _ngcontent-oam-c32="">if</span> (<span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.swUpdate.isEnabled) {
      <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.swUpdate.available.subscribe(<span class="hljs-function" _ngcontent-oam-c32="">(<span class="hljs-params" _ngcontent-oam-c32="">evt</span>) =&gt;</span> {
        <span class="hljs-keyword" _ngcontent-oam-c32="">const</span> updateApp = <span class="hljs-built_in" _ngcontent-oam-c32="">window</span>.confirm(<span class="hljs-string" _ngcontent-oam-c32="">`
          Ein Update ist verfügbar (<span class="hljs-subst" _ngcontent-oam-c32="">${evt.current.appData[<span class="hljs-string" _ngcontent-oam-c32="">'version'</span>]}</span> =&gt; <span class="hljs-subst" _ngcontent-oam-c32="">${evt.available.appData[<span class="hljs-string" _ngcontent-oam-c32="">'version'</span>]}</span>).
          Änderungen: <span class="hljs-subst" _ngcontent-oam-c32="">${evt.current.appData[<span class="hljs-string" _ngcontent-oam-c32="">'changelog'</span>]}</span>
          Wollen Sie das Update jetzt installieren?
        `</span>);
        <span class="hljs-keyword" _ngcontent-oam-c32="">if</span> (updateApp) { <span class="hljs-built_in" _ngcontent-oam-c32="">window</span>.location.reload(); }
      });
    }
  }
}</code></pre><p _ngcontent-oam-c32="">Um nun tatsächlich einen neuen Service Worker zu erhalten, müssen wir noch Änderungen an der <code _ngcontent-oam-c32="">ngsw-config.json</code> vornehmen, damit nach dem Binärvergleich eine neue Version des Service Workers erzeugt wird. Wir ändern hier lediglich die Versionsnummer sowie das Changelog.</p><blockquote _ngcontent-oam-c32=""><p _ngcontent-oam-c32="">An dieser Stelle sei nochmals angemerkt, dass die Versionsnummer keine tatsächliche Version des Service Workers darstellt. Wir könnten hier auch eine niedrigere Versionsnummer angeben, und es würde trotzdem ein Update des Service Workers erfolgen.</p></blockquote><pre _ngcontent-oam-c32=""><code class="language-json" _ngcontent-oam-c32="">{
  <span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
  <span class="hljs-attr" _ngcontent-oam-c32="">"appData"</span>: {
    <span class="hljs-attr" _ngcontent-oam-c32="">"version"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"2.0.0"</span>,
    <span class="hljs-attr" _ngcontent-oam-c32="">"changelog"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"Caching bereits abgerufener Bücher"</span>
  },
  <span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
}</code></pre><p _ngcontent-oam-c32="">Erzeugen wir die Anwendung neu und starten wieder den Webserver, so sehen wir, dass kurz nach dem Laden der Seite ein Hinweis zum Update erscheint. Bestätigen wir mit <em _ngcontent-oam-c32="">OK</em>, wird die Seite neu geladen und es wird fortan der neu erzeugte Service Worker verwendet.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/bm-pwa-update.png" alt="Screenshot Anzeige eines Updates der PWA" _ngcontent-oam-c32=""></p><h2 id="push-notifications" _ngcontent-oam-c32="">Push Notifications</h2><p _ngcontent-oam-c32="">Zum Abschluss wollen wir uns noch der dritten wichtigen Charakteristik von PWAs widmen: den Push Notifications. Diese ermöglichen es uns, vom Server aus Benachrichtigungen an Clients zu senden, die zuvor den Benachrichtigungsdienst aktiviert haben. Push Notifications werden ebenfalls mithilfe von Service Workern implementiert.</p><p _ngcontent-oam-c32="">Die nachfolgende Abbildung stellt den Ablauf von Push-Benachrichtigungen schematisch dar. Im ersten Schritt abonnieren ein oder mehrere Clients die Benachrichtigungen (1). Anschließend soll in unserem Fall das Anlegen eines neuen Buchs auf dem Server (2) dazu führen, dass alle Abonnenten darüber benachrichtigt werden (3). In Schritt 4 wollen wir reagieren, wenn die Benachrichtigung angeklickt wird und wollen das neu angelegte Buch öffnen (4).</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-flow.svg" alt="Flow: PWA Push Notifications" _ngcontent-oam-c32=""></p><p _ngcontent-oam-c32="">Um Push-Benachrichtigungen vom Server an die Clients zu schicken, kommt die sogenannte <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API" _ngcontent-oam-c32="">Push API</a> zum Einsatz, die moderne Browser nativ unterstützen. Die Technologie wird auch <em _ngcontent-oam-c32="">WebPush</em> genannt.</p><p _ngcontent-oam-c32="">Wir legen als Erstes einen neuen Service an, der sich um die Push Notifications kümmern soll: <code _ngcontent-oam-c32="">ng generate service web-notification</code>. Das read-only Property <code _ngcontent-oam-c32="">VAPID_PUBLIC_KEY</code> enthält den Public-Key der BookMonkey API. Dieser wird für die Kommunikation zwischen dem Service Worker und dem Server mit WebPush zwingend benötigt.</p><p _ngcontent-oam-c32="">Angular stellt den Service <code _ngcontent-oam-c32="">SwPush</code> zur Verfügung, der die native Funktionalität kapselt. Über <code _ngcontent-oam-c32="">isEnabled</code> greifen wir auf <code _ngcontent-oam-c32="">SwPush</code> zu, und wir erhalten Aufschluss darüber, ob der verwendete Browser bzw. das genutzte Gerät grundsätzlich Push Notifications unterstützt. Die Methode <code _ngcontent-oam-c32="">requestSubscription()</code> von <code _ngcontent-oam-c32="">SwPush</code> fordert an, dass Push-Nachrichten im Browser aktiviert werden. Dazu muss der Public-Key des Servers übermittelt werden. Der Nutzer muss daraufhin im Browser bestätigen, dass die Anwendung Push-Nachrichten an das Gerät schicken darf. Stimmt der Nutzer zu, wird die Methode <code _ngcontent-oam-c32="">sendToServer()</code> mit dem zurückgelieferten Objekt vom Typ <code _ngcontent-oam-c32="">PushSubscriptionJSON</code> aufgerufen. Das Objekt enthält die notwendigen Abonnement-Daten, die der Server für die Speicherung und Adressierung der einzelnen Abonnenten benötigt. Wir übermitteln das Objekt mit einem HTTP-POST-Request an den Server.</p><pre _ngcontent-oam-c32=""><code class="language-ts" _ngcontent-oam-c32=""><span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
<span class="hljs-keyword" _ngcontent-oam-c32="">import</span> { HttpClient } <span class="hljs-keyword" _ngcontent-oam-c32="">from</span> <span class="hljs-string" _ngcontent-oam-c32="">'@angular/common/http'</span>;
<span class="hljs-keyword" _ngcontent-oam-c32="">import</span> { SwPush } <span class="hljs-keyword" _ngcontent-oam-c32="">from</span> <span class="hljs-string" _ngcontent-oam-c32="">'@angular/service-worker'</span>;

<span class="hljs-meta" _ngcontent-oam-c32="">@Injectable</span>({ <span class="hljs-comment" _ngcontent-oam-c32="">/* ... */</span> })
<span class="hljs-keyword" _ngcontent-oam-c32="">export</span> <span class="hljs-keyword" _ngcontent-oam-c32="">class</span> WebNotificationService {
  <span class="hljs-keyword" _ngcontent-oam-c32="">readonly</span> VAPID_PUBLIC_KEY = <span class="hljs-string" _ngcontent-oam-c32="">'BGk2Rx3DEjXdRv9qP8aKrypFoNjISAZ54l-3V05xpPOV-5ZQJvVH9OB9Rz5Ug7H_qH6CEr40f4Pi3DpjzYLbfCA'</span>;
  <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> baseUrl = <span class="hljs-string" _ngcontent-oam-c32="">'https://api3.angular-buch.com/notifications'</span>;

  <span class="hljs-keyword" _ngcontent-oam-c32="">constructor</span>(<span class="hljs-params" _ngcontent-oam-c32="">
    <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> http: HttpClient,
    <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> swPush: SwPush
  </span>) { }

  get isEnabled() {
    <span class="hljs-keyword" _ngcontent-oam-c32="">return</span> <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.swPush.isEnabled;
  }

  subscribeToNotifications(): <span class="hljs-built_in" _ngcontent-oam-c32="">Promise</span>&lt;<span class="hljs-built_in" _ngcontent-oam-c32="">any</span>&gt; {
    <span class="hljs-keyword" _ngcontent-oam-c32="">return</span> <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.swPush.requestSubscription({
      serverPublicKey: <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.VAPID_PUBLIC_KEY
    })
    .then(<span class="hljs-function" _ngcontent-oam-c32=""><span class="hljs-params" _ngcontent-oam-c32="">sub</span> =&gt;</span> <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.sendToServer(sub))
    .catch(<span class="hljs-function" _ngcontent-oam-c32=""><span class="hljs-params" _ngcontent-oam-c32="">err</span> =&gt;</span> <span class="hljs-built_in" _ngcontent-oam-c32="">console</span>.error(<span class="hljs-string" _ngcontent-oam-c32="">'Could not subscribe to notifications'</span>, err));
  }

  <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> sendToServer(params: PushSubscriptionJSON) {
    <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.http.post(<span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.baseUrl, params).subscribe();
  }
}</code></pre><p _ngcontent-oam-c32="">Im nächsten Schritt wollen wir den neuen Service einsetzen und navigieren dazu zurück in den Code der <code _ngcontent-oam-c32="">app.component.ts</code>. Wir legen das Property <code _ngcontent-oam-c32="">permission</code> als Hilfe an, um den Nutzern später im Template den entsprechenden Status der Push Notifications anzuzeigen. Über das globale Objekt <code _ngcontent-oam-c32="">Notification.permission</code> erhalten wir vom Browser den Wert <code _ngcontent-oam-c32="">default</code>, sofern noch keine Auswahl getroffen wurde, ob Benachrichtigungen durch den Nutzer genehmigt wurden. Bestätigt ein Nutzer die Nachfrage, wird der Wert <code _ngcontent-oam-c32="">granted</code> gesetzt. Bei Ablehnung erhalten wir den Wert <code _ngcontent-oam-c32="">denied</code>. Als initialen Wert verwenden wir <code _ngcontent-oam-c32="">null</code> – derselbe Wert wird ebenso verwendet, wenn der Benachrichtigungsdienst nicht unterstützt wird. Zum Abschluss benötigen wir noch eine Methode, mit der der initiale Request gestellt wird, die Push-Nachrichten zu aktivieren: <code _ngcontent-oam-c32="">submitNotification()</code>. Die Methode soll beim Klick auf einen Button ausgeführt werden und nutzt den eben erstellen <code _ngcontent-oam-c32="">WebNotificationService</code>. Sobald der Nutzer eine Auswahl getroffen hat, wollen wir den Wert des Propertys <code _ngcontent-oam-c32="">permission</code> updaten.</p><pre _ngcontent-oam-c32=""><code class="language-ts" _ngcontent-oam-c32=""><span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
<span class="hljs-keyword" _ngcontent-oam-c32="">import</span> { WebNotificationService } <span class="hljs-keyword" _ngcontent-oam-c32="">from</span> <span class="hljs-string" _ngcontent-oam-c32="">'./shared/web-notification.service'</span>;

<span class="hljs-meta" _ngcontent-oam-c32="">@Component</span>({<span class="hljs-comment" _ngcontent-oam-c32="">/* ... */</span>})
<span class="hljs-keyword" _ngcontent-oam-c32="">export</span> <span class="hljs-keyword" _ngcontent-oam-c32="">class</span> AppComponent <span class="hljs-keyword" _ngcontent-oam-c32="">implements</span> OnInit {
  permission: NotificationPermission | <span class="hljs-literal" _ngcontent-oam-c32="">null</span> = <span class="hljs-literal" _ngcontent-oam-c32="">null</span>;

  <span class="hljs-keyword" _ngcontent-oam-c32="">constructor</span>(<span class="hljs-params" _ngcontent-oam-c32="">
    <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> swUpdate: SwUpdate,
    <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> webNotificationService: WebNotificationService
  </span>) {}

  ngOnInit() {
    <span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
    <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.permission = <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.webNotificationService.isEnabled ? Notification.permission : <span class="hljs-literal" _ngcontent-oam-c32="">null</span>;
  }

  submitNotification() {
    <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.webNotificationService.subscribeToNotifications()
      .then(<span class="hljs-function" _ngcontent-oam-c32="">() =&gt;</span> <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.permission = Notification.permission);
  }
}</code></pre><p _ngcontent-oam-c32="">Zum Schluss fehlen nur noch ein paar kleine Anpassungen am Template (<code _ngcontent-oam-c32="">app.component.html</code>). Hier wollen wir einen Menüpunkt mit einem Button im rechten Bereich der Menüleiste einfügen. Der Button soll deaktiviert sein, sofern keine Push Notifications unterstützt werden (z. B. im Development-Modus von Angular oder wenn der genutzte Browser diese Funktion nicht unterstützt). Wird die Funktion unterstützt, prüfen wir noch auf die drei Zustände <code _ngcontent-oam-c32="">default</code>, <code _ngcontent-oam-c32="">granted</code> und <code _ngcontent-oam-c32="">denied</code>. Die <a href="https://semantic-ui.com/elements/button.html" _ngcontent-oam-c32="">CSS-Klassen von Semantic UI</a> sorgen für das entsprechende Styling. Die CSS-Klasse <code _ngcontent-oam-c32="">mini</code> im übergeordneten <code _ngcontent-oam-c32="">&lt;div&gt;</code> macht das Menü etwas kleiner, sodass es auch auf dem Smartphone gut aussieht.</p><pre _ngcontent-oam-c32=""><code class="language-html" _ngcontent-oam-c32=""><span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">div</span> <span class="hljs-attr" _ngcontent-oam-c32="">class</span>=<span class="hljs-string" _ngcontent-oam-c32="">"ui mini menu"</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">!-*</span> <span class="hljs-attr" _ngcontent-oam-c32="">...</span> <span class="hljs-attr" _ngcontent-oam-c32="">--</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">div</span> <span class="hljs-attr" _ngcontent-oam-c32="">class</span>=<span class="hljs-string" _ngcontent-oam-c32="">"right menu"</span>&gt;</span>
    <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">div</span> <span class="hljs-attr" _ngcontent-oam-c32="">class</span>=<span class="hljs-string" _ngcontent-oam-c32="">"item"</span>&gt;</span>
      <span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">div</span> <span class="hljs-attr" _ngcontent-oam-c32="">class</span>=<span class="hljs-string" _ngcontent-oam-c32="">"ui button"</span>
        (<span class="hljs-attr" _ngcontent-oam-c32="">click</span>)=<span class="hljs-string" _ngcontent-oam-c32="">"submitNotification()"</span>
        [<span class="hljs-attr" _ngcontent-oam-c32="">ngClass</span>]=<span class="hljs-string" _ngcontent-oam-c32="">"{
          'disabled': !permission,
          'default':  permission === 'default',
          'positive': permission === 'granted',
          'negative': permission === 'denied'
        }"</span>
      &gt;</span>Benachrichtigungen<span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">div</span>&gt;</span>
    <span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">div</span>&gt;</span>
  <span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">div</span>&gt;</span>
<span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">div</span>&gt;</span>
<span class="hljs-tag" _ngcontent-oam-c32="">&lt;<span class="hljs-name" _ngcontent-oam-c32="">router-outlet</span>&gt;</span><span class="hljs-tag" _ngcontent-oam-c32="">&lt;/<span class="hljs-name" _ngcontent-oam-c32="">router-outlet</span>&gt;</span></code></pre><p _ngcontent-oam-c32="">Geschafft! Schauen wir uns nun das Resultat im Development-Modus an, sehen wir, dass der Button ausgegraut und nicht klickbar ist, da hier die Notifications nicht unterstützt werden.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-disabled.png" alt="Screenshot: PWA Push Notifications disabled" _ngcontent-oam-c32=""></p><p _ngcontent-oam-c32="">Bauen wir die Anwendung hingegen im Production-Modus und starten den <code _ngcontent-oam-c32="">angular-http-server</code>, so ist der Button klickbar und ist zunächst im Zustand <code _ngcontent-oam-c32="">default</code>. Klicken wir den Button an, fragt uns der Browser, ob wir Push Notifications aktivieren wollen.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-default.png" alt="Screenshot: PWA Access to Push Notifications default" _ngcontent-oam-c32=""></p><p _ngcontent-oam-c32="">Wenn wir den Zugriff gewähren, wird der Button durch die CSS-Klasse <code _ngcontent-oam-c32="">success</code> grün, und wir erhalten vom Server direkt eine erste Bestätigung, dass die Benachrichtigungen aktiviert wurden.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-success.png" alt="Screenshot: PWA Success Push Notification" _ngcontent-oam-c32=""></p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-granted.png" alt="Screenshot: PWA Access to Push Notifications granted" _ngcontent-oam-c32=""></p><p _ngcontent-oam-c32="">Der API-Server unterstützt bereits WebPush: Wird nun ein neues Buch zur API hinzugefügt, erhalten wir eine Push-Benachrichtigung! Sie können das Feature ausprobieren, indem Sie entweder über die App selbst ein Buch hinzufügen, oder indem Sie die <a href="https://api3.angular-buch.com/swagger-ui/#/book/post_book" _ngcontent-oam-c32="">BookMonkey API</a> dafür nutzen.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-new-book.png" alt="Screenshot: PWA Push Notification bei einem neuen Buch" _ngcontent-oam-c32=""></p><p _ngcontent-oam-c32="">Lehnen wir hingegen ab, Benachrichtigungen zu erhalten, so färbt sich der Button rot, und wir werden nicht über neue Bücher informiert.</p><p _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-denied.png" alt="Screenshot: PWA Access to Push Notifications denied" _ngcontent-oam-c32=""></p><p _ngcontent-oam-c32="">Unter iOS wird die Funktionalität nicht unterstützt, daher bleibt der Button ausgegraut:</p><table _ngcontent-oam-c32=""><thead _ngcontent-oam-c32=""><tr _ngcontent-oam-c32=""><th align="center" _ngcontent-oam-c32="">Screenshot Android</th><th align="center" _ngcontent-oam-c32="">Screenshot iOS</th></tr></thead><tbody _ngcontent-oam-c32=""><tr _ngcontent-oam-c32=""><td align="center" _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-enabled-android.png" alt="Screenshot Android" _ngcontent-oam-c32=""> <small _ngcontent-oam-c32="">Benachrichtigungen werden unterstützt</small></td><td align="center" _ngcontent-oam-c32=""><img src="/assets/images/blog/pwa-notification-not-enabled-ios.png" alt="Screenshot iOS" _ngcontent-oam-c32=""> <small _ngcontent-oam-c32="">Benachrichtigungen werden nicht unterstützt</small></td></tr></tbody></table><h3 id="auf-die-push-notification-reagieren" _ngcontent-oam-c32="">Auf die Push Notification reagieren</h3><p _ngcontent-oam-c32="">Wir wollen zum Abschluss noch einen Schritt weiter gehen und darauf reagieren, dass ein Nutzer auf die angezeigte Benachrichtigung klickt. Hierfür stellt der Service <code _ngcontent-oam-c32="">SwPush</code> das Observable <code _ngcontent-oam-c32="">notificationClicks</code> zur Verfügung. Mit der Benachrichtigung wird im Property <code _ngcontent-oam-c32="">data</code> eine URL angegeben, die zur Seite des neu angelegten Buchs führt. Wir wollen diese URL nutzen und ein neues Browser-Fenster mit der angegebenen URL öffen.</p><blockquote _ngcontent-oam-c32=""><p _ngcontent-oam-c32="">Achtung: An dieser Stelle müssen wir <code _ngcontent-oam-c32="">window.open()</code> nutzen und nicht den Angular-Router, da die Methode <code _ngcontent-oam-c32="">notificationClicks()</code> im Service Worker aufgerufen wird und die Benachrichtigung ggf. erst erscheint, wenn wir die App bereits geschlossen haben.</p></blockquote><pre _ngcontent-oam-c32=""><code class="language-ts" _ngcontent-oam-c32=""><span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
<span class="hljs-meta" _ngcontent-oam-c32="">@Injectable</span>({ <span class="hljs-comment" _ngcontent-oam-c32="">/* ... */</span> })
<span class="hljs-keyword" _ngcontent-oam-c32="">export</span> <span class="hljs-keyword" _ngcontent-oam-c32="">class</span> WebNotificationService {
  <span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
  <span class="hljs-keyword" _ngcontent-oam-c32="">constructor</span>(<span class="hljs-params" _ngcontent-oam-c32="">
    <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> http: HttpClient,
    <span class="hljs-keyword" _ngcontent-oam-c32="">private</span> swPush: SwPush
  </span>) {
    <span class="hljs-built_in" _ngcontent-oam-c32="">this</span>.swPush.notificationClicks.subscribe(<span class="hljs-function" _ngcontent-oam-c32=""><span class="hljs-params" _ngcontent-oam-c32="">event</span> =&gt;</span> {
      <span class="hljs-keyword" _ngcontent-oam-c32="">const</span> url = event.notification.data.url;
      <span class="hljs-built_in" _ngcontent-oam-c32="">window</span>.open(url, <span class="hljs-string" _ngcontent-oam-c32="">'_blank'</span>);
    });
  }
  <span class="hljs-comment" _ngcontent-oam-c32="">// ...</span>
}</code></pre><p _ngcontent-oam-c32="">Die Push Notifications aus dem Service Worker sind ein effektiver Weg, um die Aufmerksamkeit des Nutzers gezielt auf die Anwendung zu lenken. Die Nachricht verhält sich wie eine native Benachrichtigung jeder anderen App. Im Hintergrund wird die Technologie WebPush eingesetzt, die fest mit dem Angular-Service <code _ngcontent-oam-c32="">SwPush</code> verdrahtet ist. <code _ngcontent-oam-c32="">SwPush</code> bietet also keine einfache Möglichkeit, eine Nachricht aus einer lokalen Quelle anzuzeigen.</p><h3 id="ein-blick-unter-die-haube-von-push-notifications" _ngcontent-oam-c32="">Ein Blick unter die Haube von Push Notifications</h3><p _ngcontent-oam-c32="">Haben wir alle Teile korrekt implementiert, kann der Client Push-Nachrichten vom Server empfangen. Wir wiederholen kurz dem Ablauf: Der Client macht sich zunächst beim Server bekannt, indem er ein Objekt vom Typ <code _ngcontent-oam-c32="">PushSubscription</code> an den Server übermittelt. In unserem Beispiel haben wir dazu die Service-Methode <code _ngcontent-oam-c32="">sendToServer()</code> verwendet. Der Server speichert dieses Objekt und verwendet es, um Nachrichten an den registrieren Service Worker zu übermitteln. So wird es ermöglicht, dass auch Nachrichten empfangen werden können, wenn die Anwendung geschlossen ist.</p><p _ngcontent-oam-c32="">Aber wie funktioniert der Rückkanal vom Server zum Client? Dazu schauen wir uns das automatisch generierte Objekt vom Typ <code _ngcontent-oam-c32="">PushSubscription</code> einmal genauer an:</p><pre _ngcontent-oam-c32=""><code class="language-json" _ngcontent-oam-c32="">{
  <span class="hljs-attr" _ngcontent-oam-c32="">"endpoint"</span>: <span class="hljs-string" _ngcontent-oam-c32="">"https://fcm.googleapis.com/fcm/send/erSmNAsF0ew:APA91bGfjlCRi8nIpG9fvxezt_2E0JcfJ0I_4gnm2M29JQ3kF3d_XxUqrlQatWNGotPtsW-M57vsLxhNz9vRz0IQr3KB50Dm2wjm7gAbVo1c00VpDv7-2JynXNGk1RqimZ-TfYzzAjdu"</span>,
  <span class="hljs-attr" _ngcontent-oam-c32="">"expirationTime"</span>: <span class="hljs-literal" _ngcontent-oam-c32="">null</span>,
  <span class="hljs-attr" _ngcontent-oam-c32="">"keys"</span>: {
    <span class="hljs-attr" _ngcontent-oam-c32="">"p256dh"</span>:<span class="hljs-string" _ngcontent-oam-c32="">"BO4BdhfvZ4bo3hh7NBJDb--OZWcQ37M0O8XZY6lJ67g3x7JvmzMJhz_w_EaEVKFLskkDccO3iKsXkxtlSromdzU"</span>,
    <span class="hljs-attr" _ngcontent-oam-c32="">"auth"</span>:<span class="hljs-string" _ngcontent-oam-c32="">"IH-eOcRdlxZ8P8uLl-2e6g"</span>
  }
}</code></pre><p _ngcontent-oam-c32="">Besonders interessant ist das Property <code _ngcontent-oam-c32="">endpoint</code>: Der Browser übermittelt eine URL, über die der Server Nachrichten an den Client schicken kann. Der Server sendet dazu lediglich einen HTTP-Request an diese URL. Die Notwendigkeit der Verschlüsselung mit den VAPID-Keys wird hier noch einmal deutlicher.</p><p _ngcontent-oam-c32="">Ebenso interessant ist, dass die Endpoint-URL aus dem Universum des Browserherstellers kommt. Bitte behalten Sie diesen Punkt stets im Hinterkopf: Alle Push-Nachrichten werden immer durch einen fremden Server zum Client gebracht.</p><h2 id="zusammenfassung" _ngcontent-oam-c32="">Zusammenfassung</h2><p _ngcontent-oam-c32="">Wie Sie sehen, gelingt der Einstieg in die Entwicklung von Progressive Web Apps ohne Probleme. Dank der vorbereiteten Schematics können wir uns auf die eigentliche Implementierung von Features konzentrieren. Dies war aber nur ein kleiner Einblick in Progressive Web Apps mit Angular. Wer noch mehr zum Thema erfahren möchte, dem sei der Blogpost <a href="https://itnext.io/build-a-production-ready-pwa-with-angular-and-firebase-8f2a69824fcc" _ngcontent-oam-c32="">"Build a production ready PWA with Angular and Firebase"</a> von Önder Ceylan empfohlen.</p><p _ngcontent-oam-c32="">Den vollständigen Quelltext aus diesem Artikel können Sie auf <a href="https://github.com/angular-buch/book-monkey3-pwa" _ngcontent-oam-c32="">auf GitHub</a> herunterladen.<br _ngcontent-oam-c32="">Eine <strong _ngcontent-oam-c32="">Demo des BookMonkey als PWA</strong> finden Sie unter der <a href="https://bm3-pwa.angular-buch.com" _ngcontent-oam-c32="">https://bm3-pwa.angular-buch.com</a> – probieren Sie die App am Besten auf Ihrem Smartphone aus!</p><p _ngcontent-oam-c32="">Viel Spaß beim Programmieren!</p><hr _ngcontent-oam-c32=""><p _ngcontent-oam-c32=""><small _ngcontent-oam-c32=""><strong _ngcontent-oam-c32="">Titelbild:</strong> Photo by rawpixel.com from Pexels, angepasst</small></p><!--scullyContent-end--><script>try{window.scullyContent={cssId:"_ngcontent-oam-c32",html:document.body.innerHTML.split("\x3c!--scullyContent-begin--\x3e")[1].split("\x3c!--scullyContent-end--\x3e")[0]}}catch(n){console.error("scully could not parse content")}</script><scully-content _ngcontent-oam-c32=""></scully-content><div _ngcontent-oam-c32="" class="edit-on-github"><a _ngcontent-oam-c32="" target="_blank" rel="noopener noreferrer" href="https://github.com/d-koppenhagen/d-koppenhagen.de/edit/master/blog/2019-07-progressive-web-app.md">Found an error? Edit this page on Github</a></div></section><section _ngcontent-oam-c32="" class="blog-footer"><h2 _ngcontent-oam-c32="" class="sub-heading">Share this page</h2><share-buttons _ngcontent-oam-c32="" _nghost-oam-c30=""><div _ngcontent-oam-c30="" class="sb-circles-dark sb-group ng-star-inserted"><share-button _ngcontent-oam-c30="" _nghost-oam-c29="" class="sb-button sb-circles-dark ng-star-inserted"><button _ngcontent-oam-c29="" type="button" class="sb-wrapper sb-show-icon sb-copy" aria-label="Copy link" style="font-size:14px;--button-color:#607D8B"><div _ngcontent-oam-c29="" class="sb-content ng-star-inserted"><div _ngcontent-oam-c29="" class="sb-icon ng-star-inserted"><fa-icon _ngcontent-oam-c29="" class="ng-fa-icon"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="link" class="svg-inline--fa fa-link fa-w-16 fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg></fa-icon></div></div></button></share-button><share-button _ngcontent-oam-c30="" _nghost-oam-c29="" class="sb-button sb-circles-dark ng-star-inserted"><button _ngcontent-oam-c29="" type="button" class="sb-wrapper sb-show-icon sb-twitter" aria-label="Share on Twitter" style="font-size:14px;--button-color:#00acee"><div _ngcontent-oam-c29="" class="sb-content ng-star-inserted"><div _ngcontent-oam-c29="" class="sb-icon ng-star-inserted"><fa-icon _ngcontent-oam-c29="" class="ng-fa-icon"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16 fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></fa-icon></div></div></button></share-button><share-button _ngcontent-oam-c30="" _nghost-oam-c29="" class="sb-button sb-circles-dark ng-star-inserted"><button _ngcontent-oam-c29="" type="button" class="sb-wrapper sb-show-icon sb-email" aria-label="Share link via email" style="font-size:14px;--button-color:#FF961C"><div _ngcontent-oam-c29="" class="sb-content ng-star-inserted"><div _ngcontent-oam-c29="" class="sb-icon ng-star-inserted"><fa-icon _ngcontent-oam-c29="" class="ng-fa-icon"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></fa-icon></div></div></button></share-button><share-button _ngcontent-oam-c30="" _nghost-oam-c29="" class="sb-button sb-circles-dark ng-star-inserted"><button _ngcontent-oam-c29="" type="button" class="sb-wrapper sb-show-icon sb-whatsapp" aria-label="Share on WhatsApp" style="font-size:14px;--button-color:#25D366"><div _ngcontent-oam-c29="" class="sb-content ng-star-inserted"><div _ngcontent-oam-c29="" class="sb-icon ng-star-inserted"><fa-icon _ngcontent-oam-c29="" class="ng-fa-icon"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="whatsapp" class="svg-inline--fa fa-whatsapp fa-w-14 fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"></path></svg></fa-icon></div></div></button></share-button><share-button _ngcontent-oam-c30="" _nghost-oam-c29="" class="sb-button sb-circles-dark ng-star-inserted"><button _ngcontent-oam-c29="" type="button" class="sb-wrapper sb-show-icon sb-facebook" aria-label="Share on Facebook" style="font-size:14px;--button-color:#4267B2"><div _ngcontent-oam-c29="" class="sb-content ng-star-inserted"><div _ngcontent-oam-c29="" class="sb-icon ng-star-inserted"><fa-icon _ngcontent-oam-c29="" class="ng-fa-icon"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" class="svg-inline--fa fa-facebook-f fa-w-10 fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></fa-icon></div></div></button></share-button><expand-button _ngcontent-oam-c30="" class="sb-button sb-circles-dark ng-star-inserted" style="--button-color:#FF6651"><button class="sb-wrapper sb-expand sb-show-icon" style="font-size:14px"><div class="sb-content"><div class="sb-icon"><fa-icon class="ng-fa-icon"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="ellipsis-h" class="svg-inline--fa fa-ellipsis-h fa-w-16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg></fa-icon></div></div></button></expand-button></div></share-buttons></section></div></article></dk-blog-content><dk-contact _ngcontent-oam-c25="" class="ng-tns-c25-0" _nghost-oam-c23=""><footer _ngcontent-oam-c23="" id="footer" class="ng-star-inserted"><div _ngcontent-oam-c23="" id="contact" class="inner"><h2 _ngcontent-oam-c23="" class="major">Contact me</h2><p _ngcontent-oam-c23="">Any questions or suggestions? Get in contact with me!</p><ul _ngcontent-oam-c23="" class="contact"><li _ngcontent-oam-c23="" class="icon solid fa-envelope"><a _ngcontent-oam-c23="" href="mailto:mail@d-koppenhagen.de">mail@d-koppenhagen.de</a></li><li _ngcontent-oam-c23="" class="icon solid fa-phone"><a _ngcontent-oam-c23="" href="tel:+4915129134704">+49 (0)151 29134704</a></li><li _ngcontent-oam-c23="" class="icon brands fa-github"><a _ngcontent-oam-c23="" href="https://github.com/d-koppenhagen">github.com/d-koppenhagen</a></li><li _ngcontent-oam-c23="" class="icon brands fa-twitter"><a _ngcontent-oam-c23="" href="https://twitter.com/d_koppenhagen">twitter.com/d_koppenhagen</a></li><li _ngcontent-oam-c23="" class="icon brands fa-linkedin"><a _ngcontent-oam-c23="" href="https://www.linkedin.com/in/d-koppenhagen/">linkedin.com/in/d-koppenhagen</a></li><li _ngcontent-oam-c23="" class="icon brands fa-xing"><a _ngcontent-oam-c23="" href="https://www.xing.com/profile/Danny_Koppenhagen">xing.com/profile/Danny_Koppenhagen</a></li></ul><ul _ngcontent-oam-c23="" class="copyright"><li _ngcontent-oam-c23="">© 2020 by Danny Koppenhagen</li><li _ngcontent-oam-c23="">Design: <a _ngcontent-oam-c23="" href="https://html5up.net">HTML5 UP</a></li><li _ngcontent-oam-c23="">Suggestions? Feedback? Bugs? <a _ngcontent-oam-c23="" href="https://github.com/d-koppenhagen/d-koppenhagen.de/issues">Create an issue</a>, <a _ngcontent-oam-c23="" href="https://github.com/d-koppenhagen/d-koppenhagen.de/pulls">send me a PR</a> or <a _ngcontent-oam-c23="" href="#contact">contact me</a>.</li></ul></div></footer></dk-contact><dk-cookie-banner _ngcontent-oam-c25="" _nghost-oam-c24="" class="ng-tns-c25-0 ng-trigger ng-trigger-fadeInOut ng-star-inserted ng-animating"><div _ngcontent-oam-c24="" id="cookie-banner" class="ng-star-inserted"><span _ngcontent-oam-c24="" class="banner-text">🍪 This website uses cookies to ensure you get the best experience on the site.</span><button _ngcontent-oam-c24="" class="button small">Got it!</button></div></dk-cookie-banner></dk-root><noscript>Please enable JavaScript to continue using this application.</noscript><script id="ScullyIO-transfer-state"></script><script src="runtime-es2015.28a3a662dec6928c13dc.js" type="module"></script><script src="runtime-es5.28a3a662dec6928c13dc.js" nomodule="" defer></script><script src="polyfills-es5.abb91a73b6481375e107.js" nomodule="" defer></script><script src="polyfills-es2015.2d96ee9e7a5315479fc3.js" type="module"></script><script src="main-es2015.33c477f5acd419573e93.js" type="module"></script><script src="main-es5.33c477f5acd419573e93.js" nomodule="" defer></script></body></html>